using FluentValidation;
using Helpio.Ir.Application.DTOs.Common;

namespace Helpio.Ir.Application.Validators.Common
{
    public class PaginationRequestValidator : AbstractValidator<PaginationRequest>
    {
        public PaginationRequestValidator()
        {
            RuleFor(x => x.PageNumber)
                .GreaterThan(0).WithMessage("????? ???? ???? ????? ?? ??? ????");

            RuleFor(x => x.PageSize)
                .GreaterThan(0).WithMessage("?????? ???? ???? ????? ?? ??? ????")
                .LessThanOrEqualTo(100).WithMessage("?????? ???? ????? ??? ?? 100 ????");

            RuleFor(x => x.SearchTerm)
                .MaximumLength(100).WithMessage("????? ????? ????? ??? ?? 100 ??????? ????")
                .When(x => !string.IsNullOrEmpty(x.SearchTerm));

            RuleFor(x => x.SortBy)
                .MaximumLength(50).WithMessage("???? ????????? ????? ??? ?? 50 ??????? ????")
                .Matches(@"^[a-zA-Z0-9_]+$").WithMessage("???? ????????? ??? ???????? ???? ????? ????? ? ?? ??? ????")
                .When(x => !string.IsNullOrEmpty(x.SortBy));

            RuleFor(x => x.SortDescending)
                .NotNull().WithMessage("??? ????????? ?????? ???");
        }
    }
}